#:kivy 1.10.1
#:include smartiepi_styles.kv

<SmartiePiScreen>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: False if root.fullscreen else (content.height > root.height - dp(16))
        AnchorLayout:
            size_hint_y: None
            height: root.height if root.fullscreen else max(root.height, content.height)
            GridLayout:
                id: content
                cols: 1
                spacing: '8dp'
                padding: '8dp'
                size_hint: (1, 1) if root.fullscreen else (.8, None)
                height: self.height if root.fullscreen else self.minimum_height
<VolumeControl@FloatLayout>:
    size: root.size
    canvas.before:
        Color:
            rgba: 0, 0, 1, 0
        Rectangle:
            size: root.width, root.height
            pos: root.pos
    Bubble:
        size_hint: (None, None)
        #size: (160, 120)
        #pos_hint: {'top': 1, 'y': .4}
        pos: root.pos
        size: root.size
        show_arrow: False
        orientation: 'vertical'

        Slider: 
            max: 255
            orientation: 'vertical'



<PowerMenu@FloatLayout>:
    canvas:
        Color:
            rgba: 0, 0, 0, 0
        Rectangle:
            size: self.width, self.height
    Bubble:
        size_hint: (None, None)
        #size: (160, 120)
        pos_hint: {'center_x': .8, 'y': .4}
        show_arrow: False
        orientation: 'vertical'
        BubbleButton:
            text: 'Exit'
            on_release: root.power_exit()
        BubbleButton:
            text: 'Shutdown'
            on_release: root.power_shutdown()
        BubbleButton:
            text: 'Restart'
            on_release: root.power_restart()



<SmartieActionBar@BoxLayout>:
    orientation: 'horizontal'
    size_hint_y: None
    height: '48dp'
    padding: '2dp'
    spacing: '2dp'
    canvas:
        Color:
            rgb: actionbar_bg_color
        Rectangle:
            pos: self.pos
            size: self.size

<SmartiePiHub>:
    BoxLayout:
        orientation: 'vertical'
        size: root.size #without this the layout does not expand to fill space
        canvas.before:
            Color:
                rgb: root_bg_color
            Rectangle:
                size: root.size 
                pos: self.pos

        SmartieActionBar: #top action bar
            ActionBarButton:
                text: u'\uf013' #cog
            Label:
                font_name: 'freedom.ttf'
                font_size: '40dp'
                text: 'SmartiePi Hub' 
                color: default_text
            Image:
                size_hint_x: None
                size: self.size
                pos: self.pos
                source: 'atlas://images/smartiepi/sp_logo'

        ScreenManager:
            id: sm

        SmartieActionBar: #bottom action bar
            ActionBarToggleButton:
                text: u'\uf011' #power
                on_release: root.show_power_menu(False) if self.state == 'down' else root.show_power_menu(True)
            Label:
                text: 'System Health:' #this acts as a spacer between left and right buttons
                color: default_text
            ActionBarButton:
                text: u'\uf240' #battery
            ActionBarToggleButton:
                text: u'\uf028' #volume
                on_release: self.show_volume_control()
            ActionBarToggleButton:
                text: u'\uf1eb' #wifi
                on_release: root.toggle_wifi(True) if self.state == 'down' else root.toggle_wifi(False)
            Label:
                id: date_and_time
                text: ''
                size_hint_x: None
                color: default_text
            

        
        
        

 